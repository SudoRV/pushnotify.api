{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/components/CodeBlock.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport replacePlaceholders from \"../functions/replacePlaceholders\";\nimport \"../styles/CodeBlock.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst highlightCode = code => {\n  return code.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/(\"[^\"]*\")(?=\\s*:)/g, '<span style=\"color: #df3079\">$1</span>').replace(/:\\s*(\"[^\"]*\"|\\d+)/g, ': <span style=\"color: #00a57d\">$1</span>');\n};\nconst languageExtensions = {\n  python: \"py\",\n  nodejs: \"js\",\n  javascript: \"js\",\n  java: \"java\",\n  'c++': \"cpp\",\n  c: \"c\",\n  html: \"html\",\n  css: \"css\",\n  json: \"json\",\n  xml: \"xml\"\n};\nconst CodeBlock = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  className,\n  mode,\n  step,\n  language,\n  code\n}, savedCodeRef) => {\n  _s();\n  const fileExtension = languageExtensions[language === null || language === void 0 ? void 0 : language.toLowerCase()] || language;\n  const fileName = `${step === null || step === void 0 ? void 0 : step.replaceAll(\" \", \"_\")}.${fileExtension}`;\n  const storageKey = React.useMemo(() => `codeblock_${step}_${language}`, [step, language]);\n  const [isEditable, setIsEditable] = useState(false);\n  const [editableCode, setEditableCode] = useState(code);\n  const [highlightedCode, setHighlightedCode] = useState(\"\");\n  const [showMenu, setShowMenu] = useState(false);\n  const preRef = useRef(null);\n  const fileMenuRef = useRef(null);\n  useEffect(() => {\n    const savedCode = localStorage.getItem(storageKey);\n    setEditableCode(mode === \"minimal\" ? code : savedCode || code);\n  }, [mode, code, storageKey]);\n  useEffect(() => {\n    setHighlightedCode(highlightCode(editableCode));\n  }, [editableCode]);\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(replacePlaceholders(editableCode));\n  };\n  const toggleEdit = () => {\n    if (isEditable) {\n      var _preRef$current;\n      const updatedText = ((_preRef$current = preRef.current) === null || _preRef$current === void 0 ? void 0 : _preRef$current.innerText) || editableCode;\n      setEditableCode(updatedText);\n      localStorage.setItem(storageKey, updatedText);\n    }\n    setIsEditable(prev => !prev);\n  };\n  const resetToDefault = () => {\n    localStorage.removeItem(storageKey);\n    setEditableCode(code);\n    setShowMenu(false);\n  };\n  return code === \"no response\" ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `code-container ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex jcfe aife\",\n      children: [mode !== \"minimal\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-name\",\n        style: {\n          marginRight: \"auto\",\n          color: \"grey\",\n          fontSize: \"12px\",\n          cursor: \"pointer\"\n        },\n        onClick: () => setShowMenu(!showMenu),\n        children: fileName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex jcfe btn-container\",\n        children: [mode !== \"minimal\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-btn copy-btn\",\n          onClick: toggleEdit,\n          children: isEditable ? \"Save\" : \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"copy-btn\",\n          onClick: copyToClipboard,\n          children: \"Copy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      ref: preRef,\n      contentEditable: isEditable,\n      suppressContentEditableWarning: true,\n      children: /*#__PURE__*/_jsxDEV(\"code\", {\n        ref: savedCodeRef,\n        className: \"language-json\",\n        dangerouslySetInnerHTML: {\n          __html: highlightedCode\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: fileMenuRef,\n      className: \"file-menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-btn\",\n        onClick: resetToDefault,\n        children: \"Reset to Default\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"menu-btn\",\n        onClick: () => setShowMenu(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}, \"n61K6JsubCB8yWreuL0bTJN/etA=\")), \"n61K6JsubCB8yWreuL0bTJN/etA=\");\n_c2 = CodeBlock;\nexport default CodeBlock;\nvar _c, _c2;\n$RefreshReg$(_c, \"CodeBlock$React.forwardRef\");\n$RefreshReg$(_c2, \"CodeBlock\");","map":{"version":3,"names":["React","useState","useEffect","useRef","replacePlaceholders","jsxDEV","_jsxDEV","highlightCode","code","replace","languageExtensions","python","nodejs","javascript","java","c","html","css","json","xml","CodeBlock","_s","forwardRef","_c","className","mode","step","language","savedCodeRef","fileExtension","toLowerCase","fileName","replaceAll","storageKey","useMemo","isEditable","setIsEditable","editableCode","setEditableCode","highlightedCode","setHighlightedCode","showMenu","setShowMenu","preRef","fileMenuRef","savedCode","localStorage","getItem","copyToClipboard","navigator","clipboard","writeText","toggleEdit","_preRef$current","updatedText","current","innerText","setItem","prev","resetToDefault","removeItem","children","style","marginRight","color","fontSize","cursor","onClick","_jsxFileName","lineNumber","columnNumber","ref","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","_c2","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/components/CodeBlock.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport replacePlaceholders from \"../functions/replacePlaceholders\";\nimport \"../styles/CodeBlock.scss\";\n\nconst highlightCode = (code) => {\n  return code\n    .replace(/</g, \"&lt;\") \n    .replace(/>/g, \"&gt;\") \n    .replace(/(\"[^\"]*\")(?=\\s*:)/g, '<span style=\"color: #df3079\">$1</span>') \n    .replace(/:\\s*(\"[^\"]*\"|\\d+)/g, ': <span style=\"color: #00a57d\">$1</span>'); \n};\n\nconst languageExtensions = {\n  python: \"py\",\n  nodejs: \"js\",\n  javascript: \"js\",\n  java: \"java\",\n  'c++': \"cpp\",\n  c: \"c\",\n  html: \"html\",\n  css: \"css\",\n  json: \"json\",\n  xml: \"xml\",\n};\n\nconst CodeBlock = React.forwardRef(({ className, mode, step, language, code },savedCodeRef) => {  \n  const fileExtension = languageExtensions[language?.toLowerCase()] || language;\n  const fileName = `${step?.replaceAll(\" \", \"_\")}.${fileExtension}`;\n  const storageKey = React.useMemo(() => `codeblock_${step}_${language}`, [step, language]);\n\n  const [isEditable, setIsEditable] = useState(false);\n  const [editableCode, setEditableCode] = useState(code);\n  const [highlightedCode, setHighlightedCode] = useState(\"\");\n  const [showMenu, setShowMenu] = useState(false);\n\n  const preRef = useRef(null);\n  const fileMenuRef = useRef(null);\n\n  useEffect(() => {\n    const savedCode = localStorage.getItem(storageKey);\n    setEditableCode(mode === \"minimal\" ? code : savedCode || code);\n  }, [mode, code, storageKey]);\n\n  useEffect(() => {\n    setHighlightedCode(highlightCode(editableCode));\n  }, [editableCode]);\n\n  const copyToClipboard = () => {\n    navigator.clipboard.writeText(replacePlaceholders(editableCode));\n  };\n\n  const toggleEdit = () => {\n    if (isEditable) {\n      const updatedText = preRef.current?.innerText || editableCode;\n      setEditableCode(updatedText);\n      localStorage.setItem(storageKey, updatedText);\n    }\n    setIsEditable((prev) => !prev);\n  };\n\n  const resetToDefault = () => {\n    localStorage.removeItem(storageKey);\n    setEditableCode(code);\n    setShowMenu(false);\n  };\n\n  return code === \"no response\" ? null : (\n    <div className={`code-container ${className}`}>\n      <div className=\"flex jcfe aife\">\n        {mode !== \"minimal\" && (\n          <div\n            className=\"file-name\"\n            style={{ marginRight: \"auto\", color: \"grey\", fontSize: \"12px\", cursor: \"pointer\" }}\n            onClick={() => setShowMenu(!showMenu)}\n          >\n            {fileName}\n          </div>\n        )}\n\n        <div className=\"flex jcfe btn-container\">\n          {mode !== \"minimal\" && (\n            <button className=\"edit-btn copy-btn\" onClick={toggleEdit}>\n              {isEditable ? \"Save\" : \"Edit\"}\n            </button>\n          )}\n          <button className=\"copy-btn\" onClick={copyToClipboard}>Copy</button>\n        </div>\n      </div>\n\n      <pre ref={preRef} contentEditable={isEditable} suppressContentEditableWarning={true}>\n        <code ref={savedCodeRef} className=\"language-json\" dangerouslySetInnerHTML={{ __html: highlightedCode }}></code>\n      </pre>\n\n      {/* File Menu Popup */}\n      {showMenu && (\n        <div ref={fileMenuRef} className=\"file-menu\">\n          <button className=\"menu-btn\" onClick={resetToDefault}>Reset to Default</button>\n          <button className=\"menu-btn\" onClick={() => setShowMenu(false)}>Cancel</button>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default CodeBlock;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
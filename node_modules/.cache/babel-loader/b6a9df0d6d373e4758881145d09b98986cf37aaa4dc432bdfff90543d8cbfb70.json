{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { FaSyncAlt } from \"react-icons/fa\";\nimport { RefreshCw } from \"lucide-react\";\nimport { jwtDecode } from \"jwt-decode\";\nimport generateTestToken from \"../functions/generateTestToken\";\nimport UsageGraph from \"../components/ApiStats\";\nimport \"../styles/Dashboard.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"https://inlmqkmxchdb5df6t3gjdqzpqi0jrfmc.lambda-url.eu-north-1.on.aws/\";\nlet dummyData = [{\n  hour: \"01\",\n  calls: 12\n}, {\n  hour: \"02\",\n  calls: 100\n}];\nconst Dashboard = () => {\n  _s();\n  const [userData, setUserData] = useState(null);\n  const [transaction, setTransaction] = useState(null);\n  const [testToken, setTestToken] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tokenExpiry, setTokenExpiry] = useState(null);\n  const [timeLeft, setTimeLeft] = useState(\"\");\n  useEffect(() => {\n    try {\n      const storedData = JSON.parse(localStorage.getItem(\"creds\"));\n      const transactionData = JSON.parse(localStorage.getItem(\"t_data\"));\n      if (storedData) setUserData(storedData);\n      if (transactionData) {\n        if (transactionData[\"transaction-id\"]) {\n          setTransaction(transactionData);\n        }\n        if (transactionData[\"access-token\"]) setAccessToken(transactionData[\"access-token\"]);\n        setTestToken(transactionData[\"test-token\"]);\n        updateTokenExpiry(transactionData[\"test-token\"]);\n      }\n    } catch (error) {\n      console.error(\"Error parsing local storage data:\", error);\n    }\n  }, []);\n\n  //experiment \n  // Add at the top inside Dashboard component\n  const [deviceList, setDeviceList] = useState([]);\n  const [range, setRange] = useState(\"1d\");\n  const [graphData, setGraphData] = useState(dummyData);\n  let lastFilter;\n  useEffect(() => {\n    if (userData) fetchAPIMeta();\n  }, [range, userData]);\n\n  // Function to fetch metadata and devices\n  const fetchAPIMeta = async () => {\n    try {\n      const today = new Date().getDate();\n      const urlReq = `${BASE_URL}?req=api-stats&range=${range}&day=${today}&user-id=${userData[\"user-id\"]}`;\n      const response = await fetch(urlReq);\n      const data = await response.json();\n      const rawGraph = data.usage;\n      let graphData = [];\n      if (range === \"1d\") {\n        let xKeys = [...new Set(data.map(item => item[xKey]))];\n        xKeys = xKeys.sort((a, b) => parseInt(a) - parseInt(b));\n        console.log(xKeys);\n        return;\n      }\n      console.log(data);\n      setGraphData(graphData);\n      //setDeviceList(data.devices);\n    } catch (error) {\n      console.error(\"Failed to fetch API metadata\", error);\n    }\n  };\n  function generateGraphData(rawGraph) {\n    return rawGraph.map(item => {\n      const date = new Date(item.timestamp);\n      const hours = date.getHours();\n      const minutes = date.getMinutes();\n      const seconds = date.getSeconds();\n      return {\n        time: date.toLocaleTimeString('en-US', {\n          hour12: false\n        }),\n        hour: hours.toString().padStart(2, '0'),\n        calls: item.calls,\n        timestamp: item.timestamp\n      };\n    });\n  }\n\n  // Function to update token expiry & start timer\n  const updateTokenExpiry = token => {\n    if (!token) return;\n    try {\n      const decoded = jwtDecode(token);\n      const expiryTime = decoded.exp * 1000; // Convert to milliseconds\n      setTokenExpiry(expiryTime);\n    } catch (error) {\n      console.error(\"Invalid token:\", error);\n    }\n  };\n\n  // Timer Effect\n  useEffect(() => {\n    if (!tokenExpiry) return;\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (now >= tokenExpiry) {\n        setTimeLeft(\"Expired\");\n        clearInterval(interval);\n      } else {\n        const remainingTime = Math.max(0, (tokenExpiry - now) / 1000);\n        const minutes = Math.floor(remainingTime / 60);\n        const seconds = Math.floor(remainingTime % 60);\n        setTimeLeft(`${minutes}m ${seconds}s`);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [tokenExpiry]);\n  const generateAccessToken = async () => {\n    if (!localStorage.getItem(\"creds\")) {\n      await alert(\"Please login first.\");\n      window.open(\"/login?close=auto\");\n      return;\n    } else if (accessToken) {\n      navigator.clipboard.writeText(accessToken);\n    } else {\n      //get access token\n\n      // Construct URL for generating a new test token              \n      const url = `${BASE_URL}?req=access-token&user=${userData[\"user-id\"]}`;\n      try {\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(\"Failed to fetch\");\n        const data = await response.json();\n        if (!data[\"access-token\"]) throw new Error(\"Invalid response\");\n\n        // Save new test token in local storage        \n        setAccessToken(data[\"access-token\"]);\n        localStorage.setItem(\"t_data\", JSON.stringify({\n          ...JSON.parse(localStorage.getItem(\"t_data\") || \"{}\"),\n          \"access-token\": data[\"access-token\"]\n        }));\n        return {\n          error: null,\n          token: data[\"access-token\"]\n        };\n      } catch (error) {\n        console.error(\"Error fetching access token:\", error);\n        return {\n          error: \"Failed to fetch access token\"\n        };\n      }\n    }\n  };\n  const makePayment = async () => {\n    await alert(\"Redirecting to Payment Page\");\n    const paymentWindow = window.open(\"/payment?amt=100\", \"_blank\");\n    const checkPageClosed = setInterval(() => {\n      if (paymentWindow.closed) {\n        clearInterval(checkPageClosed);\n        window.location.reload();\n      }\n    }, 500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard w100 fg1\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-info card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDC64 User Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this), userData ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 19\n          }, this), \" \", userData.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 19\n          }, this), \" \", userData.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"User ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 19\n          }, this), \" \", userData[\"user-id\"]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: [\"No user data found. \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          children: \"Please login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 54\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"transaction-history card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCB3 Transaction History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this), transaction ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 19\n          }, this), \" \\u20B9\", transaction.amount || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 19\n          }, this), \" \", new Date(transaction[\"timestamp\"]).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Transaction ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 19\n          }, this), \" \", transaction[\"transaction-id\"]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: [\"No transactions found. \", /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            all: \"unset\",\n            color: \"blue\",\n            textDecoration: \"underline\"\n          },\n          onClick: makePayment,\n          children: \"Make Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-token-section card\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          float: \"left\",\n          fontSize: \"14px\",\n          color: timeLeft === \"Expired\" ? \"red\" : \"green\",\n          fontWeight: \"bold\"\n        },\n        children: [\"Expiry : \", timeLeft || \"...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDD11 Test Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: testToken ? testToken : \"No test token generated yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"generate-btn\",\n        onClick: async () => {\n          const result = await generateTestToken(testToken);\n          setTestToken(result.token);\n          updateTokenExpiry(result.token);\n          navigator.clipboard.writeText(result.token);\n        },\n        children: timeLeft === \"Expired\" ? \"Regenerate Token\" : testToken ? \"Copy Token\" : \"Generate Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-token-section card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDD11 Access Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: accessToken ? accessToken : \"No access token generated yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          gap: \"8px\"\n        },\n        className: \"flex jcc aic \",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-btn\",\n          onClick: generateAccessToken,\n          children: accessToken ? \"Copy Token\" : \"Get Access Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), accessToken ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.open(\"/payment?close=auto&amt=1\"),\n          className: \"buy-premium generate-btn\",\n          children: transaction !== null && transaction !== void 0 && transaction.amount ? (transaction === null || transaction === void 0 ? void 0 : transaction.amount) < 1 ? \"Extend Limit\" : \"Unlimited\" : \"Extend Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 29\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"api-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex jcsb aic\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"API Statistics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"refresh-btn\",\n          title: \"Refresh\",\n          children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n            size: 22,\n            strokeWidth: 1.4\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"token-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"token-line\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Access Token:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"sk-test-abc...xyz\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"created-line\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Created At:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"2025-04-19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"10:42 AM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quota-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Quota\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"1000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Used\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"163\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Remaining\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"837\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1d\"),\n          className: range === \"1d\" ? \"active\" : \"\",\n          children: \"Day\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1w\"),\n          className: range === \"1w\" ? \"active\" : \"\",\n          children: \"Week\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1m\"),\n          className: range === \"1m\" ? \"active\" : \"\",\n          children: \"Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"graph\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"API Usage (\", range, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(UsageGraph, {\n          data: graphData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"5Fp3NYdOup5oSJ0fV5omZgyHRVY=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","FaSyncAlt","RefreshCw","jwtDecode","generateTestToken","UsageGraph","jsxDEV","_jsxDEV","BASE_URL","dummyData","hour","calls","Dashboard","_s","userData","setUserData","transaction","setTransaction","testToken","setTestToken","accessToken","setAccessToken","tokenExpiry","setTokenExpiry","timeLeft","setTimeLeft","storedData","JSON","parse","localStorage","getItem","transactionData","updateTokenExpiry","error","console","deviceList","setDeviceList","range","setRange","graphData","setGraphData","lastFilter","fetchAPIMeta","today","Date","getDate","urlReq","response","fetch","data","json","rawGraph","usage","xKeys","Set","map","item","xKey","sort","a","b","parseInt","log","generateGraphData","date","timestamp","hours","getHours","minutes","getMinutes","seconds","getSeconds","time","toLocaleTimeString","hour12","toString","padStart","token","decoded","expiryTime","exp","interval","setInterval","now","clearInterval","remainingTime","Math","max","floor","generateAccessToken","alert","window","open","navigator","clipboard","writeText","url","ok","Error","setItem","stringify","makePayment","paymentWindow","checkPageClosed","closed","location","reload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","email","href","amount","toLocaleString","style","all","color","textDecoration","onClick","float","fontSize","fontWeight","result","gap","title","size","strokeWidth","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { FaSyncAlt } from \"react-icons/fa\";\nimport { RefreshCw } from \"lucide-react\";\n\nimport { jwtDecode } from \"jwt-decode\";\nimport generateTestToken from \"../functions/generateTestToken\";\nimport UsageGraph from \"../components/ApiStats\";\n\nimport \"../styles/Dashboard.scss\";\n\nconst BASE_URL = \"https://inlmqkmxchdb5df6t3gjdqzpqi0jrfmc.lambda-url.eu-north-1.on.aws/\";\n\nlet dummyData = [\n  { hour: \"01\", calls: 12 },\n  { hour: \"02\", calls: 100 }\n];\n\n\n\nconst Dashboard = () => {\n  const [userData, setUserData] = useState(null);\n  const [transaction, setTransaction] = useState(null);\n  const [testToken, setTestToken] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tokenExpiry, setTokenExpiry] = useState(null);\n  const [timeLeft, setTimeLeft] = useState(\"\");\n\n  useEffect(() => {\n    try {\n      const storedData = JSON.parse(localStorage.getItem(\"creds\"));\n      const transactionData = JSON.parse(localStorage.getItem(\"t_data\"));\n\n      if (storedData) setUserData(storedData);\n      if (transactionData) {\n        if (transactionData[\"transaction-id\"]) {\n          setTransaction(transactionData);\n        }\n        if (transactionData[\"access-token\"]) setAccessToken(transactionData[\"access-token\"]);\n        setTestToken(transactionData[\"test-token\"]);\n        updateTokenExpiry(transactionData[\"test-token\"]);\n      }\n    } catch (error) {\n      console.error(\"Error parsing local storage data:\", error);\n    }\n  }, []);\n  \n  \n  \n  //experiment \n// Add at the top inside Dashboard component\nconst [deviceList, setDeviceList] = useState([]);\nconst [range, setRange] = useState(\"1d\");\nconst [graphData, setGraphData] = useState(dummyData);\n\nlet lastFilter;\n\nuseEffect(()=>{\n  if(userData) fetchAPIMeta();\n},[range, userData])\n\n// Function to fetch metadata and devices\nconst fetchAPIMeta = async () => {\n  try {   \n    const today = new Date().getDate();     \n    const urlReq = `${BASE_URL}?req=api-stats&range=${range}&day=${today}&user-id=${userData[\"user-id\"]}`;\n         \n    const response = await fetch(urlReq);    \n    const data = await response.json();        \n    const rawGraph = data.usage;\n    \n    let graphData=[];\n   \n    if(range===\"1d\"){\n      let xKeys = [...new Set(data.map((item) => item[xKey]))];\n      xKeys = xKeys.sort((a, b) => parseInt(a) - parseInt(b));\n      \n      console.log(xKeys)   \n      \n      return ;       \n    }  \n    \n    console.log(data)      \n    \n    setGraphData(graphData);\n    //setDeviceList(data.devices);\n  } catch (error) {\n    console.error(\"Failed to fetch API metadata\", error);\n  }\n};\n\n\nfunction generateGraphData(rawGraph) {\n  return rawGraph.map(item => {\n    const date = new Date(item.timestamp);\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const seconds = date.getSeconds();\n\n    return {\n      time: date.toLocaleTimeString('en-US', { hour12: false }),\n      hour: hours.toString().padStart(2, '0'),\n      calls: item.calls,\n      timestamp: item.timestamp,     \n    };\n  });\n}\n\n\n\n  // Function to update token expiry & start timer\n  const updateTokenExpiry = (token) => {\n    if (!token) return;\n    try {\n      const decoded = jwtDecode(token);\n      const expiryTime = decoded.exp * 1000; // Convert to milliseconds\n      setTokenExpiry(expiryTime);\n    } catch (error) {\n      console.error(\"Invalid token:\", error);\n    }\n  };\n\n  // Timer Effect\n  useEffect(() => {\n    if (!tokenExpiry) return;\n\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (now >= tokenExpiry) {\n        setTimeLeft(\"Expired\");\n        clearInterval(interval);\n      } else {\n        const remainingTime = Math.max(0, (tokenExpiry - now) / 1000);\n        const minutes = Math.floor(remainingTime / 60);\n        const seconds = Math.floor(remainingTime % 60);\n        setTimeLeft(`${minutes}m ${seconds}s`);\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [tokenExpiry]);\n\n  const generateAccessToken = async () => {\n    if (!localStorage.getItem(\"creds\")) {\n      await alert(\"Please login first.\");\n      window.open(\"/login?close=auto\");\n      return;\n    } else if (accessToken) {\n      navigator.clipboard.writeText(accessToken);\n    } else {\n      //get access token\n\n      // Construct URL for generating a new test token              \n      const url = `${BASE_URL}?req=access-token&user=${userData[\"user-id\"]}`;\n\n      try {\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(\"Failed to fetch\");\n        const data = await response.json();\n        if (!data[\"access-token\"]) throw new Error(\"Invalid response\");\n\n        // Save new test token in local storage        \n        setAccessToken(data[\"access-token\"]);\n\n        localStorage.setItem(\"t_data\", JSON.stringify({\n          ...JSON.parse(localStorage.getItem(\"t_data\") || \"{}\"),\n          \"access-token\": data[\"access-token\"]\n        }));\n\n        return { error: null, token: data[\"access-token\"] };\n      } catch (error) {\n        console.error(\"Error fetching access token:\", error);\n        return { error: \"Failed to fetch access token\" };\n      }\n    }\n  };\n\n  const makePayment = async () => {\n    await alert(\"Redirecting to Payment Page\");\n    const paymentWindow = window.open(\"/payment?amt=100\", \"_blank\");\n    const checkPageClosed = setInterval(() => {\n      if (paymentWindow.closed) {\n        clearInterval(checkPageClosed);\n        window.location.reload();\n      }\n    }, 500);\n  };\n\n  return (        \n    <div className=\"dashboard w100 fg1\">\n        <h2>User Dashboard</h2>\n\n        {/* User Info */}\n        <div className=\"user-info card\">\n          <h3>ðŸ‘¤ User Information</h3>\n          {userData ? (\n            <ul>\n              <li><strong>Username:</strong> {userData.username}</li>\n              <li><strong>Email:</strong> {userData.email}</li>\n              <li><strong>User ID:</strong> {userData[\"user-id\"]}</li>\n            </ul>\n          ) : (\n            <p className=\"error\">No user data found. <a href=\"/login\">Please login</a></p>\n          )}\n        </div>\n\n        {/* Transaction History */}\n        <div className=\"transaction-history card\">\n          <h3>ðŸ’³ Transaction History</h3>\n          {transaction ? (\n            <ul>\n              <li><strong>Amount:</strong> â‚¹{transaction.amount || \"N/A\"}</li>\n              <li><strong>Time:</strong> {new Date(transaction[\"timestamp\"]).toLocaleString()}</li>\n              <li><strong>Transaction ID:</strong> {transaction[\"transaction-id\"]}</li>\n            </ul>\n          ) : (\n            <p className=\"error\">\n              No transactions found. <button style={{ all: \"unset\", color: \"blue\", textDecoration: \"underline\" }} onClick={makePayment}>Make Payment</button>\n            </p>\n          )}\n        </div>\n\n        {/* Test Token Section */}\n        <div className=\"access-token-section card\">\n          <span style={{ float: \"left\", fontSize: \"14px\", color: timeLeft === \"Expired\" ? \"red\" : \"green\", fontWeight: \"bold\" }}>Expiry : {timeLeft || \"...\"}</span>\n          <h3>ðŸ”‘ Test Token</h3>\n          <p>{testToken ? testToken : \"No test token generated yet\"}</p>\n\n          <button\n            className=\"generate-btn\"\n            onClick={async () => {\n              const result = await generateTestToken(testToken);\n              setTestToken(result.token);\n              updateTokenExpiry(result.token);\n              navigator.clipboard.writeText(result.token);\n            }}\n          >\n            {timeLeft === \"Expired\" ? \"Regenerate Token\" : (testToken ? \"Copy Token\" : \"Generate Token\")}\n          </button>\n        </div>\n\n        {/* Access Token Section */}\n        <div className=\"access-token-section card\">\n          <h3>ðŸ”‘ Access Token</h3>\n          <p>{accessToken ? accessToken : \"No access token generated yet\"}</p>\n\n          <div style={{ gap: \"8px\" }} className=\"flex jcc aic \">\n            <button className=\"generate-btn\" onClick={generateAccessToken}>\n              {accessToken ? \"Copy Token\" : \"Get Access Token\"}\n            </button>\n\n            {accessToken ? (<button onClick={() => window.open(\"/payment?close=auto&amt=1\")} className=\"buy-premium generate-btn\">\n              {transaction?.amount ? (transaction?.amount < 1 ? \"Extend Limit\" : \"Unlimited\") : \"Extend Limit\"}\n            </button>) : \"\"}\n          </div>\n        </div>\n        \n\n{/* Professional API Stats UI */}\n<div className=\"api-stats\">\n      <div className=\"flex jcsb aic\">\n        <h2>API Statistics</h2>\n        <button className=\"refresh-btn\" title=\"Refresh\">\n          <RefreshCw size={22} strokeWidth={1.4} />\n        </button>\n      </div>\n      \n\n      <div className=\"token-info\">\n        <div className=\"token-line\">\n          <span>Access Token:</span>\n          <code>sk-test-abc...xyz</code>          \n        </div>\n\n        <div className=\"created-line\">\n          <div>\n            <span>Created At:</span> <strong>2025-04-19</strong>\n          </div>\n          <div>\n            <span>Time:</span> <strong>10:42 AM</strong>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"quota-info\">\n        <div className=\"flex fdc text-center\">\n          <span>Quota</span> <strong>1000</strong>\n        </div>\n        \n        <div className=\"flex fdc text-center\">\n          <span>Used</span> <strong>163</strong>\n        </div>\n        \n        <div className=\"flex fdc text-center\">\n          <span>Remaining</span> <strong>837</strong>\n        </div>\n      </div>\n\n      <div className=\"filter-buttons\">\n        <button onClick={() => setRange(\"1d\")} className={range === \"1d\" ? \"active\" : \"\"}>Day</button>\n        <button onClick={() => setRange(\"1w\")} className={range === \"1w\" ? \"active\" : \"\"}>Week</button>\n        <button onClick={() => setRange(\"1m\")} className={range === \"1m\" ? \"active\" : \"\"}>Month</button>\n      </div>\n\n      <div className=\"graph\">\n        <h4>API Usage ({range})</h4>\n        \n        <UsageGraph data={graphData} />\n        \n      </div>\n    </div>\n        \n\n    </div>\n  );\n};\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
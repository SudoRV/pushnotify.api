{"ast":null,"code":"var _jsxFileName = \"/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { FaSyncAlt } from \"react-icons/fa\";\nimport { RefreshCw } from \"lucide-react\";\nimport { jwtDecode } from \"jwt-decode\";\nimport generateTestToken from \"../functions/generateTestToken\";\n//import UsageGraph from \"../components/ApiStats\";\n\nimport \"../styles/Dashboard.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"https://inlmqkmxchdb5df6t3gjdqzpqi0jrfmc.lambda-url.eu-north-1.on.aws/\";\nlet dummyData = [{\n  hour: \"01\",\n  calls: 12\n}, {\n  hour: \"02\",\n  calls: 100\n}];\nconst Dashboard = () => {\n  _s();\n  const [userData, setUserData] = useState(null);\n  const [transaction, setTransaction] = useState(null);\n  const [testToken, setTestToken] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tokenExpiry, setTokenExpiry] = useState(null);\n  const [timeLeft, setTimeLeft] = useState(\"\");\n  useEffect(() => {\n    try {\n      const storedData = JSON.parse(localStorage.getItem(\"creds\"));\n      const transactionData = JSON.parse(localStorage.getItem(\"t_data\"));\n      if (storedData) setUserData(storedData);\n      if (transactionData) {\n        if (transactionData[\"transaction-id\"]) {\n          setTransaction(transactionData);\n        }\n        if (transactionData[\"access-token\"]) setAccessToken(transactionData[\"access-token\"]);\n        setTestToken(transactionData[\"test-token\"]);\n        updateTokenExpiry(transactionData[\"test-token\"]);\n      }\n    } catch (error) {\n      console.error(\"Error parsing local storage data:\", error);\n    }\n  }, []);\n\n  //experiment \n  // Add at the top inside Dashboard component\n  const [deviceList, setDeviceList] = useState([]);\n  const [range, setRange] = useState(\"1d\");\n  const [graphData, setGraphData] = useState(dummyData);\n  let lastFilter;\n  useEffect(() => {\n    if (userData) fetchAPIMeta();\n  }, [range, userData]);\n\n  // Function to fetch metadata and devices\n  const fetchAPIMeta = async () => {\n    try {\n      const today = new Date().getDate();\n      const urlReq = `${BASE_URL}?req=api-stats&range=${range}&day=${today}&user-id=${userData[\"user-id\"]}`;\n      const response = await fetch(urlReq);\n      const data = await response.json();\n      const rawGraph = data.usage;\n      let graph = {};\n      if (range === \"1d\") {\n        const graphData = generateGraphData(rawGraph[today]);\n        let xKeys = [...new Set(graphData.map(item => item[\"xKey\"]))];\n        xKeys = xKeys.sort((a, b) => parseInt(a) - parseInt(b));\n        const hourToIndex = Object.fromEntries(sortedHours.map((hour, i) => [hour, i]));\n        const floatXkey = parseFloat(`${hourToIndex[item[xKey]]}.${(hours + minutes / 60 + seconds / 3600).toFixed(6).split(\".\")[1]}`);\n        graph = {\n          xKeys: xKeys,\n          usage: graphData\n        };\n        console.log(graph);\n        return;\n      }\n      console.log(data);\n      setGraphData(graphData);\n      //setDeviceList(data.devices);\n    } catch (error) {\n      console.error(\"Failed to fetch API metadata\", error);\n    }\n  };\n  function generateGraphData(rawGraph) {\n    return rawGraph.map(item => {\n      const date = new Date(item.timestamp);\n      const hours = date.getHours();\n      const minutes = date.getMinutes();\n      const seconds = date.getSeconds();\n      return {\n        xKey: hours.toString().padStart(2, '0'),\n        time: date.toLocaleTimeString('en-US', {\n          hour12: false\n        }),\n        calls: item.calls\n      };\n    });\n  }\n\n  // Function to update token expiry & start timer\n  const updateTokenExpiry = token => {\n    if (!token) return;\n    try {\n      const decoded = jwtDecode(token);\n      const expiryTime = decoded.exp * 1000; // Convert to milliseconds\n      setTokenExpiry(expiryTime);\n    } catch (error) {\n      console.error(\"Invalid token:\", error);\n    }\n  };\n\n  // Timer Effect\n  useEffect(() => {\n    if (!tokenExpiry) return;\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (now >= tokenExpiry) {\n        setTimeLeft(\"Expired\");\n        clearInterval(interval);\n      } else {\n        const remainingTime = Math.max(0, (tokenExpiry - now) / 1000);\n        const minutes = Math.floor(remainingTime / 60);\n        const seconds = Math.floor(remainingTime % 60);\n        setTimeLeft(`${minutes}m ${seconds}s`);\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [tokenExpiry]);\n  const generateAccessToken = async () => {\n    if (!localStorage.getItem(\"creds\")) {\n      await alert(\"Please login first.\");\n      window.open(\"/login?close=auto\");\n      return;\n    } else if (accessToken) {\n      navigator.clipboard.writeText(accessToken);\n    } else {\n      //get access token\n\n      // Construct URL for generating a new test token              \n      const url = `${BASE_URL}?req=access-token&user=${userData[\"user-id\"]}`;\n      try {\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(\"Failed to fetch\");\n        const data = await response.json();\n        if (!data[\"access-token\"]) throw new Error(\"Invalid response\");\n\n        // Save new test token in local storage        \n        setAccessToken(data[\"access-token\"]);\n        localStorage.setItem(\"t_data\", JSON.stringify({\n          ...JSON.parse(localStorage.getItem(\"t_data\") || \"{}\"),\n          \"access-token\": data[\"access-token\"]\n        }));\n        return {\n          error: null,\n          token: data[\"access-token\"]\n        };\n      } catch (error) {\n        console.error(\"Error fetching access token:\", error);\n        return {\n          error: \"Failed to fetch access token\"\n        };\n      }\n    }\n  };\n  const makePayment = async () => {\n    await alert(\"Redirecting to Payment Page\");\n    const paymentWindow = window.open(\"/payment?amt=100\", \"_blank\");\n    const checkPageClosed = setInterval(() => {\n      if (paymentWindow.closed) {\n        clearInterval(checkPageClosed);\n        window.location.reload();\n      }\n    }, 500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard w100 fg1\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-info card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDC64 User Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this), userData ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 19\n          }, this), \" \", userData.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 19\n          }, this), \" \", userData.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"User ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 19\n          }, this), \" \", userData[\"user-id\"]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: [\"No user data found. \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          children: \"Please login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 54\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"transaction-history card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCB3 Transaction History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), transaction ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }, this), \" \\u20B9\", transaction.amount || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 19\n          }, this), \" \", new Date(transaction[\"timestamp\"]).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Transaction ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 19\n          }, this), \" \", transaction[\"transaction-id\"]]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: [\"No transactions found. \", /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            all: \"unset\",\n            color: \"blue\",\n            textDecoration: \"underline\"\n          },\n          onClick: makePayment,\n          children: \"Make Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-token-section card\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          float: \"left\",\n          fontSize: \"14px\",\n          color: timeLeft === \"Expired\" ? \"red\" : \"green\",\n          fontWeight: \"bold\"\n        },\n        children: [\"Expiry : \", timeLeft || \"...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDD11 Test Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: testToken ? testToken : \"No test token generated yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"generate-btn\",\n        onClick: async () => {\n          const result = await generateTestToken(testToken);\n          setTestToken(result.token);\n          updateTokenExpiry(result.token);\n          navigator.clipboard.writeText(result.token);\n        },\n        children: timeLeft === \"Expired\" ? \"Regenerate Token\" : testToken ? \"Copy Token\" : \"Generate Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-token-section card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDD11 Access Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: accessToken ? accessToken : \"No access token generated yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          gap: \"8px\"\n        },\n        className: \"flex jcc aic \",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"generate-btn\",\n          onClick: generateAccessToken,\n          children: accessToken ? \"Copy Token\" : \"Get Access Token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this), accessToken ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.open(\"/payment?close=auto&amt=1\"),\n          className: \"buy-premium generate-btn\",\n          children: transaction !== null && transaction !== void 0 && transaction.amount ? (transaction === null || transaction === void 0 ? void 0 : transaction.amount) < 1 ? \"Extend Limit\" : \"Unlimited\" : \"Extend Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 29\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"api-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex jcsb aic\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"API Statistics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"refresh-btn\",\n          title: \"Refresh\",\n          children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n            size: 22,\n            strokeWidth: 1.4\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"token-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"token-line\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Access Token:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"sk-test-abc...xyz\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"created-line\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Created At:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"2025-04-19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 13\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"10:42 AM\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quota-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Quota\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"1000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Used\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"163\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex fdc text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Remaining\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"837\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1d\"),\n          className: range === \"1d\" ? \"active\" : \"\",\n          children: \"Day\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1w\"),\n          className: range === \"1w\" ? \"active\" : \"\",\n          children: \"Week\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRange(\"1m\"),\n          className: range === \"1m\" ? \"active\" : \"\",\n          children: \"Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"graph\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"API Usage (\", range, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"5Fp3NYdOup5oSJ0fV5omZgyHRVY=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","FaSyncAlt","RefreshCw","jwtDecode","generateTestToken","jsxDEV","_jsxDEV","BASE_URL","dummyData","hour","calls","Dashboard","_s","userData","setUserData","transaction","setTransaction","testToken","setTestToken","accessToken","setAccessToken","tokenExpiry","setTokenExpiry","timeLeft","setTimeLeft","storedData","JSON","parse","localStorage","getItem","transactionData","updateTokenExpiry","error","console","deviceList","setDeviceList","range","setRange","graphData","setGraphData","lastFilter","fetchAPIMeta","today","Date","getDate","urlReq","response","fetch","data","json","rawGraph","usage","graph","generateGraphData","xKeys","Set","map","item","sort","a","b","parseInt","hourToIndex","Object","fromEntries","sortedHours","i","floatXkey","parseFloat","xKey","hours","minutes","seconds","toFixed","split","log","date","timestamp","getHours","getMinutes","getSeconds","toString","padStart","time","toLocaleTimeString","hour12","token","decoded","expiryTime","exp","interval","setInterval","now","clearInterval","remainingTime","Math","max","floor","generateAccessToken","alert","window","open","navigator","clipboard","writeText","url","ok","Error","setItem","stringify","makePayment","paymentWindow","checkPageClosed","closed","location","reload","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","email","href","amount","toLocaleString","style","all","color","textDecoration","onClick","float","fontSize","fontWeight","result","gap","title","size","strokeWidth","_c","$RefreshReg$"],"sources":["/data/data/com.termux/files/home/jWTFcm/clients/pushnotify.api/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { FaSyncAlt } from \"react-icons/fa\";\nimport { RefreshCw } from \"lucide-react\";\n\nimport { jwtDecode } from \"jwt-decode\";\nimport generateTestToken from \"../functions/generateTestToken\";\n//import UsageGraph from \"../components/ApiStats\";\n\nimport \"../styles/Dashboard.scss\";\n\nconst BASE_URL = \"https://inlmqkmxchdb5df6t3gjdqzpqi0jrfmc.lambda-url.eu-north-1.on.aws/\";\n\nlet dummyData = [\n  { hour: \"01\", calls: 12 },\n  { hour: \"02\", calls: 100 }\n];\n\n\n\nconst Dashboard = () => {\n  const [userData, setUserData] = useState(null);\n  const [transaction, setTransaction] = useState(null);\n  const [testToken, setTestToken] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tokenExpiry, setTokenExpiry] = useState(null);\n  const [timeLeft, setTimeLeft] = useState(\"\");\n\n  useEffect(() => {\n    try {\n      const storedData = JSON.parse(localStorage.getItem(\"creds\"));\n      const transactionData = JSON.parse(localStorage.getItem(\"t_data\"));\n\n      if (storedData) setUserData(storedData);\n      if (transactionData) {\n        if (transactionData[\"transaction-id\"]) {\n          setTransaction(transactionData);\n        }\n        if (transactionData[\"access-token\"]) setAccessToken(transactionData[\"access-token\"]);\n        setTestToken(transactionData[\"test-token\"]);\n        updateTokenExpiry(transactionData[\"test-token\"]);\n      }\n    } catch (error) {\n      console.error(\"Error parsing local storage data:\", error);\n    }\n  }, []);\n  \n  \n  \n  //experiment \n// Add at the top inside Dashboard component\nconst [deviceList, setDeviceList] = useState([]);\nconst [range, setRange] = useState(\"1d\");\nconst [graphData, setGraphData] = useState(dummyData);\n\nlet lastFilter;\n\nuseEffect(()=>{\n  if(userData) fetchAPIMeta();\n},[range, userData])\n\n// Function to fetch metadata and devices\nconst fetchAPIMeta = async () => {\n  try {   \n    const today = new Date().getDate();     \n    const urlReq = `${BASE_URL}?req=api-stats&range=${range}&day=${today}&user-id=${userData[\"user-id\"]}`;\n         \n    const response = await fetch(urlReq);    \n    const data = await response.json();        \n    const rawGraph = data.usage;\n    \n    let graph = {};\n         \n    if(range===\"1d\"){          \n      const graphData = generateGraphData(rawGraph[today]);\n      \n      let xKeys = [...new Set(graphData.map((item) => item[\"xKey\"]))];\n      xKeys = xKeys.sort((a, b) => parseInt(a) - parseInt(b));\n      \n      const hourToIndex = Object.fromEntries(sortedHours.map((hour, i) => [hour, i]));\n      \n      const floatXkey = parseFloat(`${hourToIndex[item[xKey]]}.${((hours + minutes / 60 + seconds / 3600).toFixed(6)).split(\".\")[1]}`);\n      \n      graph = {\n        xKeys: xKeys,\n        usage: graphData,\n      }   \n      \n      console.log(graph)\n      return ;       \n    }  \n    \n    console.log(data)      \n    \n    setGraphData(graphData);\n    //setDeviceList(data.devices);\n  } catch (error) {\n    console.error(\"Failed to fetch API metadata\", error);\n  }\n};\n\n\nfunction generateGraphData(rawGraph) {\n  return rawGraph.map(item => {\n    const date = new Date(item.timestamp);\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const seconds = date.getSeconds();\n\n    return {\n      xKey: hours.toString().padStart(2, '0'),      \n      time: date.toLocaleTimeString('en-US',  { hour12: false }),      \n      calls: item.calls,      \n    };\n  });\n}\n\n\n\n  // Function to update token expiry & start timer\n  const updateTokenExpiry = (token) => {\n    if (!token) return;\n    try {\n      const decoded = jwtDecode(token);\n      const expiryTime = decoded.exp * 1000; // Convert to milliseconds\n      setTokenExpiry(expiryTime);\n    } catch (error) {\n      console.error(\"Invalid token:\", error);\n    }\n  };\n\n  // Timer Effect\n  useEffect(() => {\n    if (!tokenExpiry) return;\n\n    const interval = setInterval(() => {\n      const now = Date.now();\n      if (now >= tokenExpiry) {\n        setTimeLeft(\"Expired\");\n        clearInterval(interval);\n      } else {\n        const remainingTime = Math.max(0, (tokenExpiry - now) / 1000);\n        const minutes = Math.floor(remainingTime / 60);\n        const seconds = Math.floor(remainingTime % 60);\n        setTimeLeft(`${minutes}m ${seconds}s`);\n      }\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [tokenExpiry]);\n\n  const generateAccessToken = async () => {\n    if (!localStorage.getItem(\"creds\")) {\n      await alert(\"Please login first.\");\n      window.open(\"/login?close=auto\");\n      return;\n    } else if (accessToken) {\n      navigator.clipboard.writeText(accessToken);\n    } else {\n      //get access token\n\n      // Construct URL for generating a new test token              \n      const url = `${BASE_URL}?req=access-token&user=${userData[\"user-id\"]}`;\n\n      try {\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(\"Failed to fetch\");\n        const data = await response.json();\n        if (!data[\"access-token\"]) throw new Error(\"Invalid response\");\n\n        // Save new test token in local storage        \n        setAccessToken(data[\"access-token\"]);\n\n        localStorage.setItem(\"t_data\", JSON.stringify({\n          ...JSON.parse(localStorage.getItem(\"t_data\") || \"{}\"),\n          \"access-token\": data[\"access-token\"]\n        }));\n\n        return { error: null, token: data[\"access-token\"] };\n      } catch (error) {\n        console.error(\"Error fetching access token:\", error);\n        return { error: \"Failed to fetch access token\" };\n      }\n    }\n  };\n\n  const makePayment = async () => {\n    await alert(\"Redirecting to Payment Page\");\n    const paymentWindow = window.open(\"/payment?amt=100\", \"_blank\");\n    const checkPageClosed = setInterval(() => {\n      if (paymentWindow.closed) {\n        clearInterval(checkPageClosed);\n        window.location.reload();\n      }\n    }, 500);\n  };\n\n  return (        \n    <div className=\"dashboard w100 fg1\">\n        <h2>User Dashboard</h2>\n\n        {/* User Info */}\n        <div className=\"user-info card\">\n          <h3>👤 User Information</h3>\n          {userData ? (\n            <ul>\n              <li><strong>Username:</strong> {userData.username}</li>\n              <li><strong>Email:</strong> {userData.email}</li>\n              <li><strong>User ID:</strong> {userData[\"user-id\"]}</li>\n            </ul>\n          ) : (\n            <p className=\"error\">No user data found. <a href=\"/login\">Please login</a></p>\n          )}\n        </div>\n\n        {/* Transaction History */}\n        <div className=\"transaction-history card\">\n          <h3>💳 Transaction History</h3>\n          {transaction ? (\n            <ul>\n              <li><strong>Amount:</strong> ₹{transaction.amount || \"N/A\"}</li>\n              <li><strong>Time:</strong> {new Date(transaction[\"timestamp\"]).toLocaleString()}</li>\n              <li><strong>Transaction ID:</strong> {transaction[\"transaction-id\"]}</li>\n            </ul>\n          ) : (\n            <p className=\"error\">\n              No transactions found. <button style={{ all: \"unset\", color: \"blue\", textDecoration: \"underline\" }} onClick={makePayment}>Make Payment</button>\n            </p>\n          )}\n        </div>\n\n        {/* Test Token Section */}\n        <div className=\"access-token-section card\">\n          <span style={{ float: \"left\", fontSize: \"14px\", color: timeLeft === \"Expired\" ? \"red\" : \"green\", fontWeight: \"bold\" }}>Expiry : {timeLeft || \"...\"}</span>\n          <h3>🔑 Test Token</h3>\n          <p>{testToken ? testToken : \"No test token generated yet\"}</p>\n\n          <button\n            className=\"generate-btn\"\n            onClick={async () => {\n              const result = await generateTestToken(testToken);\n              setTestToken(result.token);\n              updateTokenExpiry(result.token);\n              navigator.clipboard.writeText(result.token);\n            }}\n          >\n            {timeLeft === \"Expired\" ? \"Regenerate Token\" : (testToken ? \"Copy Token\" : \"Generate Token\")}\n          </button>\n        </div>\n\n        {/* Access Token Section */}\n        <div className=\"access-token-section card\">\n          <h3>🔑 Access Token</h3>\n          <p>{accessToken ? accessToken : \"No access token generated yet\"}</p>\n\n          <div style={{ gap: \"8px\" }} className=\"flex jcc aic \">\n            <button className=\"generate-btn\" onClick={generateAccessToken}>\n              {accessToken ? \"Copy Token\" : \"Get Access Token\"}\n            </button>\n\n            {accessToken ? (<button onClick={() => window.open(\"/payment?close=auto&amt=1\")} className=\"buy-premium generate-btn\">\n              {transaction?.amount ? (transaction?.amount < 1 ? \"Extend Limit\" : \"Unlimited\") : \"Extend Limit\"}\n            </button>) : \"\"}\n          </div>\n        </div>\n        \n\n{/* Professional API Stats UI */}\n<div className=\"api-stats\">\n      <div className=\"flex jcsb aic\">\n        <h2>API Statistics</h2>\n        <button className=\"refresh-btn\" title=\"Refresh\">\n          <RefreshCw size={22} strokeWidth={1.4} />\n        </button>\n      </div>\n      \n\n      <div className=\"token-info\">\n        <div className=\"token-line\">\n          <span>Access Token:</span>\n          <code>sk-test-abc...xyz</code>          \n        </div>\n\n        <div className=\"created-line\">\n          <div>\n            <span>Created At:</span> <strong>2025-04-19</strong>\n          </div>\n          <div>\n            <span>Time:</span> <strong>10:42 AM</strong>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"quota-info\">\n        <div className=\"flex fdc text-center\">\n          <span>Quota</span> <strong>1000</strong>\n        </div>\n        \n        <div className=\"flex fdc text-center\">\n          <span>Used</span> <strong>163</strong>\n        </div>\n        \n        <div className=\"flex fdc text-center\">\n          <span>Remaining</span> <strong>837</strong>\n        </div>\n      </div>\n\n      <div className=\"filter-buttons\">\n        <button onClick={() => setRange(\"1d\")} className={range === \"1d\" ? \"active\" : \"\"}>Day</button>\n        <button onClick={() => setRange(\"1w\")} className={range === \"1w\" ? \"active\" : \"\"}>Week</button>\n        <button onClick={() => setRange(\"1m\")} className={range === \"1m\" ? \"active\" : \"\"}>Month</button>\n      </div>\n\n      <div className=\"graph\">\n        <h4>API Usage ({range})</h4>\n        \n        {/*<UsageGraph data={graphData} />*/}\n        \n      </div>\n    </div>\n        \n\n    </div>\n  );\n};\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}